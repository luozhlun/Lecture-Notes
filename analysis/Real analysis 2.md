- [Chapter 2 Integration](#chapter-2-integration)
  - [2.1 Measurable Functions](#21-measurable-functions)
    - [2.1.1 Real/Complex-valued Functions](#211-realcomplex-valued-functions)
    - [2.1.2 Simple Functions](#212-simple-functions)
    - [2.1.3 Complete Measures](#213-complete-measures)
  - [2.2 Integration of Non-negative Functions](#22-integration-of-non-negative-functions)
    - [2.2.1 Non-negative Simple Functions](#221-non-negative-simple-functions)
    - [2.2.2 Non-negative Measurable Functions](#222-non-negative-measurable-functions)
  - [2.3 Integration of Complex Functions](#23-integration-of-complex-functions)
    - [2.3.1 The Space Tilde $L^1$](#231-the-space-tilde-l1)
    - [2.3.2 The Space $L^1$](#232-the-space-l1)
  - [2.4 Modes of Convergence](#24-modes-of-convergence)
    - [2.4.1 Convergences](#241-convergences)
    - [2.4.2 Relations Between Different Convergence](#242-relations-between-different-convergence)
  - [2.5 Product Measure](#25-product-measure)
    - [2.5.1 The Product Measure](#251-the-product-measure)
    - [2.5.2 The Monotone Class Lemma](#252-the-monotone-class-lemma)
    - [2.5.3 Fubini Theorem and Tonelli Theorem](#253-fubini-theorem-and-tonelli-theorem)
  - [2.6 The $n$-dimensional Lebesgue Integral](#26-the-n-dimensional-lebesgue-integral)
    - [2.6.1 Invariance Properties](#261-invariance-properties)

Ref:

1. [Real Variable Function Ch.1 Set Theory](https://zhuanlan.zhihu.com/p/473263173)
2. [Real Variable Function Ch.2 Lebesgue Measure](https://zhuanlan.zhihu.com/p/487435847)
3. [Real Variable Function Ch.3 Measurable Function](https://zhuanlan.zhihu.com/p/493842948)
4. [Real Variable Function Ch.4 The Lebesgue Integration](https://zhuanlan.zhihu.com/p/513296172)
5. [Real Variable Function Ch.5 Differentiation and Integration](https://zhuanlan.zhihu.com/p/524968471)

# Chapter 2 Integration

## 2.1 Measurable Functions

### 2.1.1 Real/Complex-valued Functions

$\bf Def\ (Extended\ real\ line)$

Let $\overline{\mathbb{R}}=\mathbb{R}\cup\{\pm\infty\}$ with the topology making $F(x)=\tan(x),x\in[-\pi/2,\pi/2]$ a homeomorphism $[-\pi/2,\pi/2]\cong\overline{\mathbb{R}}$. Since $\{\infty\}$ and $\{-\infty\}$ are skeletons in $\overline{\mathbb{R}}$, a set $B\in\mathcal{B}_{\overline{\mathbb{R}}}$ is Borel if and only if $B\setminus\{\infty,-\infty\}\in\mathcal{B}_{\overline{\mathbb{R}}}$ is Borel. Hence $\mathcal{B}_{\overline{\mathbb{R}}}$ is generated by $\{[a,\infty]:a\in\mathbb{R}\}$.

<br/><br/>

$\bf Def\ (Measurable\ functions)$

If $(X,\mathcal{M})$ and $(Y,\mathcal{N})$ are measurable spaces, a map $f:X\to Y$ is **$(\mathcal{M},\mathcal{N})$-measurable** if $f^{-1}(E)\in\mathcal{M}$ for all $E\in\mathcal{N}$.

If $Y\in\{\mathbb{R},\overline{\mathbb{R}},\mathbb{C}\}$ and $\mathcal{N}=\mathcal{B}_Y$ is the Borel $\sigma$-algebra (from now on we always assume this is the case unless specified), then a $(\mathcal{M},\mathcal{B}_Y)$-measurable function $f:X\to Y$ is called **measurable** or **$\mathcal{M}$-measurable**. In particular, if $X$ is a topological space and $\mathcal{M}=\mathcal{B}_X$, then $f$ is called **Borel measurable**. If $(X,\mathcal{M})=(\mathbb{R},\mathcal{L})$, then $f$ is called **Lebesgue measurable**.

<br/><br/>

$\bf Prop\ 2.1$

If $\mathcal{N}$ is generated by $\mathcal{E}$, then $f:X\to Y$ is $(\mathcal{M},\mathcal{N})$-measurable if and only if $f^{-1}(E)\in\mathcal{M}$ for all $E\in\mathcal{E}$.

$\bf Prop\ 2.3$

If $f:X\to\mathbb{R}$ or $\overline{\mathbb{R}}$, then TFAE.

1. $f$ is measurable.
2. $\{x\in X:f(x)>a\}\in\mathcal{M}$ for all $a\in\mathbb{R}$.
3. $\{x\in X:f(x)\geq a\}\in\mathcal{M}$ for all $a\in\mathbb{R}$.
4. $\{x\in X:f(x)<a\}\in\mathcal{M}$ for all $a\in\mathbb{R}$.
5. $\{x\in X:f(x)\leq a\}\in\mathcal{M}$ for all $a\in\mathbb{R}$.

<br/><br/>

$\bf Prop$

Suppose $Y=\prod_{a\in A}Y_a$ and $\mathcal{N}_a$ is a $\sigma$-algebra on $Y_a$. Then $\otimes_{a\in A}\mathcal{N}_a$ is the smallest $\sigma$-algebra on $Y$ such that each coordinate map $\pi_a:Y\to Y_a$ is measurable.

> $\it Proof$
> 
> The product $\sigma$-algebra $\otimes_{a\in A}\mathcal{N}_a$ is generated by $\{\pi_a^{-1}(E):a\in A,E\in\mathcal{N}_a\}$, and hence the smallest $\sigma$-algebra containing these sets.

$\bf Prop\ 2.4$

Mapping $f:X\to\prod_{a\in A}Y_a$ is $(\mathcal{M},\mathcal{N})$-measurable if and only if each coordinate map $f_a=\pi_a\circ f:X\to Y_a$ is $(\mathcal{M},\mathcal{N}_a)$-measurable.

> $\it Proof$
>
> The product $\sigma$-algebra $\otimes_{a\in A}\mathcal{N}_a$ is generated by $\{\pi_a^{-1}(E):a\in A,E\in\mathcal{N}_a\}$. Use Prop 2.1 to finish the proof.

$\bf Prop\ 2.5$

If $f:X\to\mathbb{C}$, then TFAE.

1. $f$ is measurable.
2. $\mathrm{Re}(f)$ and $\mathrm{Im}(f)$ are measurable.

> $\it Proof$
>
> By Prop 1.5, $\mathcal{B}_{\mathbb{C}}=\mathcal{B}_{\mathbb{R}^2}=\mathcal{B}_{\mathbb{R}}\otimes\mathcal{B}_{\mathbb{R}}$. It follows from Prop 2.4.

<br/><br/>

### 2.1.2 Simple Functions

$\bf Thm\ 2.10$

1. If $f:X\to[0,\infty]$ is measurable, then there are simple functions $\{\varphi_n\}$ such that $0\leq\varphi_1\leq\varphi_2\leq\dots\leq f$, $\varphi_n\to f$ pointwise, and $\varphi_n\to f$ uniformly on any set where $f$ is bounded.
2. If $f:X\to\mathbb{C}$ is measurable, then there are simple functions $\{\varphi_n\}$ such that $0\leq|\varphi_1|\leq|\varphi_2|\leq\dots\leq |f|$, $\varphi_n\to f$ pointwise, and $\varphi_n\to f$ uniformly on any set where $f$ is bounded.

> $\it Proof$
>
> (1) Let $E_{n,k}=\{x:\frac{k}{2^n}\leq f(x)<\frac{k+1}{2^n}\}$ and $F_n=\{x:f(x)\geq n\}$, then $[0,1]=\bigsqcup_{k=0}^{n2^n-1}E_{n,k}\sqcup F_n$. Consider $\varphi_n=\sum_{k=0}^{n2^n-1}\frac{k}{2^n}\chi_{E_{n,k}}+n\chi_{F_n}$. On the set where $f\leq n$ we have $0\leq f-\varphi_n\leq\frac{1}{2^n}\to 0$.
>
> (2) Consider $\mathrm{Re}(f)^+,\mathrm{Re}(f)^-,\mathrm{Im}(f)^+$ and $\mathrm{Im}(f)^-$.

<br/><br/>

### 2.1.3 Complete Measures

$\bf Prop\ 2.11$

Let $(X,\mathcal{M},\mu)$ be a measure space, then TFAE.

1. $\mu$ is a complete measure on $(X,\mathcal{M})$.
2. If $f$ is measurable and $f=g$ a.e., then $g$ is measurable.
3. If $\{f_n\}$ are measurable and $f_n\to f$ a.e., then $f$ is measurable.

<br/><br/>

## 2.2 Integration of Non-negative Functions

Fix a measure space $(X,\mathcal{M},\mu)$. Let $L^+$ denote the set of measurable functions $f:X\to[0,\infty]$.

### 2.2.1 Non-negative Simple Functions

$\bf Def$

If $\varphi\in L^+$ is a simple function, define $\int\varphi d\mu=\sum_{j=1}^{n}a_j\mu(E_j)$ where $\varphi=\sum_{j=1}^{n}a_j\chi_{E_j}$ is the standard representation of $\varphi$. Sometimes we write $\int\varphi$ as a shorthand of $\int\varphi d\mu$ if it is clear from the context. Given $A\in\mathcal{M}$, note that $\varphi\chi_A$ is a simple function, we define $\int_A\varphi=\int\varphi\chi_A$

$\bf Prop\ 2.13$

Let $\varphi,\psi\in L^+$ be simple functions.

1. If $c\geq 0$, then $\int c\varphi=c\int\varphi$.
2. $\int(\varphi+\psi)=\int\varphi+\int\psi$.
3. If $\varphi\leq\psi$, then $\int\varphi\leq\int\psi$.
4. Let, $\lambda(A)\mapsto\int_A\varphi d\mu$, then $\lambda$ is a measure on $\mathcal{M}$.

> $\it Proof$
>
> (4) $\lambda(\varnothing)=\int_\varnothing\varphi=0$. Suppose $A_1,A_2,\dots\in\mathcal{M}$ are disjoint. Then
> $$
\begin{aligned}
\lambda\left(\bigcup_{k=1}^\infty A_k\right)
&=\int\sum_{j=1}^{n}a_j\chi_{E_j}\chi_{\bigcup_{k=1}^\infty A_k}d\mu
=\int\sum_{j=1}^{n}a_j\chi_{\bigcup_{k=1}^\infty(E_j\cap A_k)}d\mu\\
&=\sum_{j=1}^{n}a_j\mu\left(\bigcup_{k=1}^\infty(E_j\cap A_k)\right)
=\sum_{k=1}^{\infty}\sum_{j=1}^{n}a_j\mu\left(E_j\cap A_k\right)
=\sum_{k=1}^{\infty}\lambda(A_k).
\end{aligned}$$ 

<br/><br/>

### 2.2.2 Non-negative Measurable Functions

$\bf Def$

If $f\in L^+$, define $\int fd\mu=\sup\{\int\varphi d\mu:0\leq\varphi\leq f,\varphi\text{ simple}\}$. Note that the definition of the integration of simples functions coincides, it is well-defined.

<br/><br/>

$\bf Thm\ 2.14\ (Monotone\ convergence\ theorem, MCT)$

If $f_1\leq f_2\leq\dots$ are in $L^+$ and $f=\lim_{n\to\infty}f_n$, then $f\in L^+$ and $\lim_{n\to\infty}\int f_n=\int f$.

> $\it Proof$
>
> ($\geq$) Fix $\varphi$ simple with $0\leq\varphi\leq f$. Fix $\varphi>0$. Let $E_n=\{x:f_n(x)\geq(1-\varepsilon)\varphi(x)\}$. Then $E_1\subset E_2\subset\dots$ and $\bigcup_{n=1}^{\infty}E_n=X$. Also,
> $$\int f_n\geq\int_{E_n}f_n\geq(1-\varepsilon)\int_{E_n}\varphi.$$
> Since $E\mapsto\int_E\varphi$ is a measure,
> $$
\lim_{n\to\infty}\int f_n
\geq(1-\varepsilon)\lim_{n\to\infty}\int_{E_n}\varphi
=(1-\varepsilon)\int_{\bigcup_{n=1}^{\infty}E_n}\varphi
=(1-\varepsilon)\int\varphi.$$
> Send $\varepsilon\to0$, then $\lim_{n\to\infty}\int f_n\geq\int\varphi$. Take supremum, then $\lim_{n\to\infty}\int f_n\geq\int f$.

$\bf Thm\ 2.15\ (Termwise\ integration)$

If $\{f_n\}\subset L^+$, then $\int\sum_{n=1}^{\infty}f_n=\sum_{n=1}^{\infty}\int f_n$.

<br/><br/>

$\bf Prop$

Let $f,g\in L^+$.

1. If $c\geq 0$, then $\int cf=c\int f$.
2. $\int(f+g)=\int f+\int g$.
3. If $f\leq g$, then $\int f\leq\int g$.
4. (EX 2.14) Let $\lambda(E)=\int_E fd\mu$, then $\lambda$ is a measure on $\mathcal{M}$. Moreover, $\int gd\lambda=\int fgd\mu$.
5. (Chebyshev's inequality) If $\varepsilon>0$ and $p>0$, then $\mu(\{x:f>\varepsilon\})\leq{\varepsilon^{-p}}\int f^p$.
6. (Prop 2.16) $\int f=0$ if and only if $f=0$ a.e..
7. (Prop 2.20) If $\int<\infty$, then $\{x:f(x)=\infty\}$ is a null set, and $\{x:f(x)>0\}$ is $\sigma$-finite.

> $\it Proof$
>
> (4) $\lambda(\varnothing)=0$. Suppose $A_1,A_2,\dots\in\mathcal{M}$ are disjoint. Then by Theorem 2.15
> $$
\begin{aligned}
\lambda\left(\bigcup_{k=1}^\infty A_k\right)
&=\int\chi_{\bigcup_{k=1}^\infty A_k}fd\mu
=\int\sum_{k=1}^{\infty}\chi_{A_k}fd\mu\\
&=\sum_{k=1}^{\infty}\int\chi_{A_k}fd\mu
=\sum_{k=1}^{\infty}\lambda(A_k).
\end{aligned}$$
> Hence $\lambda$ is indeed a measure. For the second assertion, first check the case when $g$ a non-negative simple function. And then approximate general $g\in L^+$ by increasing non-negative simple functions $\{\varphi_n\}$. Then $fg_n\uparrow fg$. Use MCT twice, then
> $$
\int\varphi_nd\lambda\to\int gd\lambda
\quad\text{and}\quad
\int f\varphi_nd\mu\to\int fgd\mu.$$
> Then
> $$
\int fgd\mu=\lim\int f\varphi_nd\mu=\lim\int \varphi_nd\lambda=\int gd\lambda.$$
>
> (5) Integrate both sides of $\varepsilon^p\chi_{f>\varepsilon}\leq f^p$.
> 
> (6) $(\Rightarrow)$ Note that $\{x:f>0\}=\bigcup_{k=1}^\infty\{x:f>\frac{1}{k}\}$. Use Chebyshev's inequality to show $\mu(\{x:f>0\})=0$. $(\Leftarrow)$ it is obviously true when $f$ is a non-negative simple function. Then approximate general $f\in L^+$ by simple functions.
>
> (7) For the first assertion, note that $\{x:f=\infty\}=\bigcup_{k=1}^\infty\{x:f>k\}$. Use Chebyshev's inequality to show $\mu(\{x:f=\infty\})=0$. For the second assertion, note that $\{x:f>0\}=\bigcup_{k=1}^\infty\{x:f>\frac{1}{k}\}$ and use Chebyshev's inequality to show every $\mu(\{x:f>\frac{1}{k}\})<\infty$.

<br/><br/>

$\bf Thm\ 2.18\ (Fatou's\ Lemma)$

If $\{f_n\}\subset L^+$, then $\int\liminf_{n\to\infty}f_n\leq\liminf_{n\to\infty}\int f_n$.

> $\it Proof$
>
> Use $\liminf_{n\to\infty}f_n=\lim_{n\to\infty}\inf_{k\geq n}f_k$ with MCT.

<br/><br/>

## 2.3 Integration of Complex Functions

### 2.3.1 The Space Tilde $L^1$

Fix a measure space $(X,\mathcal{M},\mu)$.

$\bf Def$

1. A measurable function $f:X\to\mathbb{R}$ is **integrable** if $\int|f|<\infty$. In this case, we define $\int f=\int f^+-\int f^-$.
2. A measurable function $f:X\to\mathbb{C}$ is **integrable** if $\int|f|<\infty$. In this case, we define $\int f=\int\mathrm{Re}f-i\int\mathrm{Im}f$.

$\bf Def$

Note that the set of integrable $\mathbb{R}$-valued (resp. $\mathbb{C}$-valued) functions on $X$ is a $\mathbb{R}$ (resp. $\mathbb{C}$) vector space. Define $\widetilde{L}^1(X,\mathcal{M},\mu)$ to be the vector space of integrable $\mathbb{C}$-valued functions on $X$. We write $\widetilde{L}^1$ instead when the context is clear.

<br/><br/>

$\bf Prop$

Let $f,g\in\widetilde{L}^1$.

1. (Prop 2.21) If $c\geq 0$, then $\int cf=c\int f$.
2. (Prop 2.21) $\int(f+g)=\int f+\int g$.
3. (Prop 2.22) $|\int f|\leq\int|f|$.
4. (Prop 2.23) $\{x:f(x)\neq0\}$ is $\sigma$-finite.
5. (Prop 2.23) TFAE.
   1. $\int_E f=\int_E g$ for all $E\in\mathcal{M}$.
   2. $\int|f-g|=0$.
   3. $f=g$ a.e..

> $\it Proof$
>
> (3) Fix $z\in\mathbb{C}$ with $|z|=1$ and $|\int f|=z\int f$.
>
> (4) Note that $\{x:f\neq 0\}=\{x:|f|\neq 0\}$. It follows from Prop 2.20 and $|f|\in L^+$.
>
> (5) $(ii\Leftrightarrow iii)$ follows from Prop 2.16. $(ii\Rightarrow i)$ follows from (1). $(i\Rightarrow ii)$ Let $u=\mathrm{Re}(f-g)$, $v=\mathrm{Im}(f-g)$. Let $E^\pm=\{x:u^\pm>0\}$, $F^\pm=\{x:v^\pm>0\}$. Then
> $$
\begin{aligned}
\int|f-g|
&\leq\int|u|+|v|=\int u^++u^-+v^++v^-\\
&=\int_{E^+} u^++\int_{E^-}u^-+\int_{F^+}v^++\int_{F^-}v^-\\
&=\int_{E^+} u-\int_{E^-}u+\int_{F^+}v-\int_{F^-}v\\
&=\mathrm{Re}\left(\int_{E^+}(f-g)-\int_{E^-}(f-g)\right)\\
&+\mathrm{Im}\left(\int_{E^+}(f-g)-\int_{E^-}(f-g)\right)=0.
\end{aligned}$$

<br/><br/>

### 2.3.2 The Space $L^1$

$\bf Def$

Define an equivalence class on $\widetilde L^1$ by $f\sim g\Leftrightarrow f=g$ a.e., and define $L^1(X,\mathcal{M},\mu)=\widetilde L^1/\sim$. We write $L^1$ instead when the context is clear. It follows that $L^1$ is a $\mathbb{C}$ vector space with operations

$$
[f]+[g]=[f+g]\quad\text{and}\quad c[f]=[cf].
$$

Note that the integral $\int[f]=\int f$ is well-defined and linear on $L^1$, by Prop 2.23, $\rho([f],[g])=\int|f-g|.$ is a well-defined distance on $L^1$. Later we will show $\rho$ is complete, hence **$L^1$ is a Banach space.** From now on, we just write $f$ to mean the equivalence class of $f$ in $L^1$ for convenience.

$\bf Def\ (Convergence\ in\ L^1)$

(From now on, we just write $f$ to mean the equivalence class of $f$ in $L^1$ for convenience.) A sequence $\{f_n\}$ in $L^1$ **converges in $L^1$** to $f\in L^1$ if $\int|f_n-f|\to0$.

<br/><br/>

$\bf Prop$

Let $(X,\overline{\mathcal{M}},\overline{\mu})$ be the completion of $(X,\mathcal{M},\mu)$. Then $\widetilde{L}^1(X,\mathcal{M},\mu)\subset\widetilde{L}^1(X,\overline{\mathcal{M}},\overline{\mu})$ and the inclusion map descends to a bijection $F:L^1(X,\mathcal{M},\mu)\to L^1(X,\overline{\mathcal{M}},\overline{\mu})$. Moreover $f$ is a homeomorphism.

> $\it Proof$
>
> Omit.

$\bf Rmk$

Since $L^1(X,\mathcal{M},\mu)$ and $L^1(X,\overline{\mathcal{M}},\overline{\mu})$ are homeomorphic, from now on we always assume $\mu$ is complete.

<br/><br/>

$\bf Thm\ 2.24\ (Dominated\ convergence\ theorem)$

If $\{f_n\}\subset L^1$, $f_n\to f$ a.e. and $|f_n|\leq g$ a.e. for some $g\in L^1$ for all $n$, then $f\in L^1$ and $\lim_{n\to\infty}\int f_n=\int f$. Moreover, $f_n\to f$ in $L^1$.

> $\it Proof$
>
> Since $\mu$ is complete, $f$ is measurable by Prop 2.11. Also $|f|\leq g$ a.e. and hence $\int |f|\leq\int g<\infty$. So $f\in L^+$.
>
> By taking real and imaginary parts, we may assume $f_n$ and $f$ are real-valued. Then $g+f_n\geq 0$ a.e. and $g-f_n\geq 0$ a.e.. Apply Fatou's lemma to finish the proof.
>
> For the last assertion, apply DCT to $f_n-f\to0$ since $|f_n-f|\leq 2|f|\in L^1$.

<br/><br/>

$\bf Thm\ 2.25$

Suppose $\{f_n\}\subset L^1$ and $\sum_n\int|f_n|<\infty$. Then $\sum_n f_n$ converges a.e. to a function in $L^1$ and $\int\sum_n f_n=\sum_n\int f_n$.

$\bf Rmk$

It implies that the norm $\|f\|=\int|f|$ on $L^1$ is complete. Hence $L^1$ is a Banach space. (See Exercise 1.4.7 and Exercise 1.2.2 of Zhang Gongqing’s “Lecture Notes on Functional Analysis”)

<br/><br/>

$\bf Thm\ 2.26$

If $f\in L^1$ and $\varepsilon>0$, then there is an integrable simple function $\varphi=\sum a_j\chi_{E_j}$ such that $\int|f-\varepsilon|d\mu<\varepsilon$. Hence integrable simple functions are dense in $L^1$.

Moreover, if $X=\mathbb{R}$ and $\mu$ is a L-S measure, then we may assume that each $E_j$ is a finite union of bounded open intervals. In addition, there is a continuous function $g$ with bounded support such that $\int|f-g|d\mu$.

> $\it Proof$
>
> Omit.

<br/><br/>

## 2.4 Modes of Convergence

### 2.4.1 Convergences

Fix a measure space $(X,\mathcal{M},\mu)$. Let $\{f_n\}$ be a sequence of $\mathbb{C}$-valued measurable functions. Let $f$ be a $\mathbb{C}$-valued measurable function.

$\bf Def\ (Convergence\ in\ measure)$

1. $\{f_n\}$ is **Cauchy in measure** if for every $\varepsilon>0$, $\lim_{m,n\to\infty}\mu(\{x:|f_m(x)-f_n(x)|\geq\varepsilon\})=0$.
2. $f_n\to f$ **in measure** if for every $\varepsilon>0$, $\lim_{n\to\infty}\mu(\{x:|f(x)-f_n(x)|\geq\varepsilon\})=0$

$\bf Prop\ (Uniqueness\ of\ limit\ function)$

Let $\{f_n\}$ be a sequence of $\mathbb{C}$-valued measurable functions. If $f_n\to f$ and $f_n\to g$ both in measure, then $f=g$ a.e..

> $\it Proof$
>
> Let $E_m=\{x:|f-g|>\frac{1}{m}\}$. Then $E_m\subset\{x:|f-f_n|>\frac{1}{2m}\}\cup\{x:|g-f_n|>\frac{1}{2m}\}$ for all $n$. Hence $\mu(E_m)=0$.

<br/><br/>

$\bf Def\ (Almost\ uniform\ convergence)$

If for every $\varepsilon>0$, there exists $E\in\mathcal{E}$ such that $\mu(E)<\varepsilon$ and $f_n\to f$ uniformly on $E^c$, we say $f_n\to f$ **almost uniformly**.

$\bf Prop\ (almost\ uniformly\Rightarrow measure,\ a.e.)$

If $f_n\to f$ almost uniformly, then $f_n\to f$ in measure and $f_n\to f$ a.e..

> $\it Proof$
>
> (1) Fix $\varepsilon>0$. There is $E\in\mathcal{M}$ and $N\geq 1$ such that $\mu(E)<\varepsilon$ and $|f_n-f|<\varepsilon$ for every $x\in E^c$ and $n\geq N$. Hence whenever $n\geq N$, $\mu(\{x:|f_n-f|\geq\varepsilon\})\leq\mu(E)<\varepsilon$.
>
> (2) Choose $E_n$ with $\mu(E_n)<\frac{1}{n}$ by the definition of almost uniform convergence and let $F=\bigcap_{n=1}^\infty E_n$.

<br/><br/>

### 2.4.2 Relations Between Different Convergence

![](figures/Modes%20of%20convergence.png)

$\bf Prop\ 2.29\ (L^1 \Rightarrow measure)$

If $f_n\to f$ in $L^1$, then $f_n\to f$ in measure.

> $\it Proof$
>
> It follows from Chebyshev's inequality.

<br/><br/>

$\bf Thm\ 2.30$

$\{f_n\}$ is Cauchy in measure if and only if there is a measurable function $f$ such that $f_n\to f$ in measure. Moreover, there is a subsequence $\{f_{n_j}\}$ such that $f_{n_j}\to f$ a.e..

> $\it Proof$
>
> Omit.

<br/><br/>

$\bf Thm\ 2.33\ (Egorov's\ theorem)$

Suppose $\mu(X)<\infty$. If $f_n\to f$ a.e., then $f_n\to f$ almost uniformly. Hence $f_n\to f$ in measure.

<br/><br/>

## 2.5 Product Measure

### 2.5.1 The Product Measure

$\bf Prop$

Let $(X,\mathcal{M},\mu)$ and $(Y,\mathcal{N},\nu)$ be measure spaces. Let $\mathcal{A}$ be the collection of disjoint finite unions of rectangles and define $\pi:\mathcal{A}\to[0,\infty]$ by $\pi\left(\bigsqcup_{i=1}^{n}A_i\times B_i\right)=\sum_{i=1}^{n}\mu(A_i)\nu(B_i)$. Then $\mathcal{A}$ is an algebra which generates $\mathcal{M}\otimes\mathcal{N}$ and $\pi$ is a well-defined premeasure on $\mathcal{A}$.

<br/><br/>

$\bf Cor/Def$

The outer measure defined by $\pi$ restricts to a measure, denoted by $\mu\times\nu$ and called **the product of $\mu$ and $\nu$**, on $\mathcal{M}\otimes\mathcal{N}$. Moreover, $(\mu\times\nu)(A\times B)=\mu(A)\nu(B)$ for all $A\in\mathcal{M}$ and $B\in\mathcal{N}$. $(X\times Y,\mathcal{M}\otimes\mathcal{N},\mu\times\nu)$ is the **product measure space**.

If $\mu$ and $\nu$ are $\sigma$-finite, then $\mu\times\nu$ is the unique measure on $\mathcal{M}\otimes\mathcal{N}$ such that $(\mu\times\nu)(A\times B)=\mu(A)\nu(B)$ for all $A\in\mathcal{M}$ and $B\in\mathcal{N}$.

> $\it Proof$
>
> It follows from Theorem 2.14

<br/><br/>

Suppose $E\subset X\times Y$, $x\in X$, $y\in Y$ and $f:X\times Y\to\mathbb{C}$. We introduce the notations:

1. $E_x:=\{y\in Y:(x,y)\in E\}$ the x-section of $E$
2. $E^y:=\{x\in X:(x,y)\in E\}$ the y-section of $E$
3. $f_x:Y\to\mathbb{C}$ defined by $f_x(y)=f(x,y)$
4. $f^y:X\to\mathbb{C}$ defined by $f^y(x)=f(x,y)$

$\bf Prop\ 2.34$

Suppose $x\in X$ and $y\in Y$.

1. If $E\in\mathcal{M}\otimes\mathcal{N}$, then $E_x\in\mathcal{N}$ and $E^y\in\mathcal{M}$.
2. If $f:X\times Y\to\mathbb{C}$ is $\mathcal{M}\otimes\mathcal{N}$ measurable, then $f_x$ is $\mathcal{N}$-measurable and $f^y$ is $\mathcal{M}$-measurable.

> $\it Proof$
>
> 1. Check $\{E\subset X\times Y:E_x\in\mathcal{N}\text{ and }E^y\in\mathcal{M}\}$ is a $\sigma$-algebra and contains all rectangles. Hence $R\supset\mathcal{M}\otimes\mathcal{N}$.
>
> 2. Use the fact that $f_x^{-1}(B)=f^{-1}(B)_x$ and $(f^y)^{-1}(B)=f^{-1}(B)^y$.

<br/><br/>

### 2.5.2 The Monotone Class Lemma

$\bf Prop/Def\ (Monotone\ class)$

A collection of subsets $\mathcal{C}\subset\mathcal{P}(X)$ is a **monotone class** if it is closed under countable increasing unions and countable decreasing intersections.

Clearly the intersection of two monotone classes is a monotone class. Hence given a collection of subsets $\mathcal{E}\subset\mathcal{P}(X)$, there is a unique smallest monotone class containing $\mathcal{E}$, called **the monotone class generated by $\mathcal{E}$**.

<br/><br/>

$\bf Thm\ 2.35\ (The\  Monotone\  Class\  Lemma)$

If $\mathcal{A}\subset\mathcal{P}(X)$ is an algebra, $\mathcal{C}$ is the monotone class generated by $\mathcal{A}$, then $\mathcal{C}=\sigma(\mathcal{A})$.

> $\it Proof$
>
> Omit.

In fact, the monotone class lemma is equivalent to the $\pi-\lambda$ theorem, which is also widely used in measure theory. See [Monotone Class Theorem and another similar theorem](https://math.stackexchange.com/questions/1841193/monotone-class-theorem-and-another-similar-theorem) and [Monotone class theorem vs Dynkin $\pi$-$\lambda$ theorem](https://math.stackexchange.com/questions/1193970/monotone-class-theorem-vs-dynkin-pi-lambda-theorem).

$\bf Def/Thm\ (\pi-\lambda\ Theorem)$

If $P$ is a $\pi$ system (if closed under finite intersections) and $L$ is a $\lambda$ system (if (i) $X\in L$, (ii) If $A,B\in L$ and $A\subset B$, then $B\setminus A\in L$, (iii) If $A_n\in L$ and $A_n\uparrow A$, then $A\in L$), then $\sigma(P)\subset L$.

<br/><br/>

### 2.5.3 Fubini Theorem and Tonelli Theorem

$\bf Thm\ 2.36$

Suppose $(X,\mathcal{M},\mu)$ and $(Y,\mathcal{N},\nu)$ are $\sigma$-finite. If $E\in\mathcal{M}\otimes\mathcal{N}$, then the functions $x\mapsto\nu(E_x)$ and $y\mapsto\mu(E^y)$ are measurable and

$$
\mu\times\nu(E)=\int\nu(E_x)d\mu(x)=\int\mu(E^y)d\nu(y).
$$

> $\it Proof$
>
> First suppose that $\mu$ and $\nu$ are finite. Let $\mathcal{C}$ be the collection of $E\in\mathcal{M}\otimes\mathcal{N}$ such that $y\mapsto\mu(E^y)$ is measurable and $\mu\times\nu(E)=\int\mu(E^y)d\nu(y)$. Check $\mathcal{C}$ is a monotone class and $\mathcal{C}$ contains the algebra $\mathcal{A}$ (the collection of disjoint finite unions of rectangles). By the monotone class lemma, $\mathcal{C}=\sigma(\mathcal{A})=\mathcal{M}\otimes\mathcal{N}$.
>
> Next consider the general case where $\mu$ and $\nu$ could be infinite. Since they are $\sigma$-finite, $X=\bigcup_{j=1}^{\infty}X_j$ and $Y=\bigcup_{j=1}^{\infty}Y_j$ where $\mu(X_j),\nu(Y_j)<\infty$. Fix $E\in\mathcal{M}\otimes\mathcal{N}$ and let $E_j=E\cap(X_j\times Y_j)$. Note that $y\mapsto\mu(E_j^y)$ increase to $y\mapsto\mu(E^y)$ pointwise as $j\to\infty$. So $y\mapsto\mu(E^y)$ is measurable and by MCT
>
> $$
\mu\times\nu(E)=\lim_{j\to\infty}\mu\times\nu(E_j)=\lim_{j\to\infty}\int\mu(E_j^y)d\nu(y)=\int\mu(E^y)d\nu(y).$$

<br/><br/>

$\bf Thm\ 2.37$

Suppose $(X,\mathcal{M},\mu)$ and $(Y,\mathcal{N},\nu)$ are $\sigma$-finite.

**[Tonelli Theorem]** If $f\in L^+(X\times Y)$, then $x\mapsto\int f_xd\nu$, $y\mapsto\int f^yd\mu$ are in $L^+(X)$, $L^+(Y)$ respectively, and

$$
\int fd(\mu\times\nu)=\int\left[\int f(x,y)d\nu(y)\right]d\mu(x)=\int\left[\int f(x,y)d\mu(x)\right]d\nu(y).
$$

**[Fubini Theorem]** If $f\in L^1(\mu\times\nu)$, then $f_x\in L^1(\nu)$ for a.e. $x\in X$, $f_y\in L^1(\mu)$ for a.e. $y\in Y$, the a.e. defined functions $x\mapsto\int f_xd\nu$, $y\mapsto\int f^yd\mu$ are in $L^1(\mu)$, $L^1(\nu)$ respectively, and 

$$
\int fd(\mu\times\nu)=\int\left[\int f(x,y)d\nu(y)\right]d\mu(x)=\int\left[\int f(x,y)d\mu(x)\right]d\nu(y).
$$

> $\it Proof$
>
> [Tonelli Theorem] By Theorem 2.36, it's true for characteristic functions. Extends to simple functions and further to $L^+(X\times Y)$ by MCT.
>
> [Fubini Theorem] By taking real and imaginary parts, then positive and negative parts, it reduces to Tonelli Theorem.

<br/><br/>

$\bf Thm\ 2.39\ (Fubini-Tonelli\ Theorem\ for\ Complete\ Measures)$

Suppose $(X,\mathcal{M},\mu)$ and $(Y,\mathcal{N},\nu)$ are complete and $\sigma$-finite. Let $(X\times Y,\overline{\mathcal{M}\otimes\mathcal{N}},\overline{\mu\times\nu})$ be the completion of $(X\times Y,\mathcal{M}\otimes\mathcal{N},\mu\times\nu)$. If $f$ is $\overline{\mathcal{M}\otimes\mathcal{N}}$-measurable, and either (1) $f\geq 0$ or (2) $f\in L^1(\overline{\mu\times\nu})$, then $f_x$ is $\mathcal{N}$-measurable for a.e. $x\in X$ and $f^y$ is $\mathcal{M}$-measurable for a.e. $y\in Y$, and in case (2) $f_x$ and $f^y$ are also integrable for a.e. $x$ and $y$. Moreover, $x\mapsto\int f_xd\nu$ and $y\mapsto\int f^yd\mu$ are measurable, and in case (2) integrable. And

$$
\int fd(\overline{\mu\times\nu})=\int\left[\int f(x,y)d\nu(y)\right]d\mu(x)=\int\left[\int f(x,y)d\mu(x)\right]d\nu(y).
$$

<br/><br/>

## 2.6 The $n$-dimensional Lebesgue Integral

$\bf Def$

The **Lebesgue measure on $\mathbb{R}^n$**, denoted by $m^n$, is the completion of $m\times\dots\times m$. The domain of $m^n$, denoted by $\mathcal{L}^n$, is called the class of Lebesgue measurable sets. We often drop the superscript $n$.

<br/><br/>

$\bf Thm\ 2.40$

If $E\in\mathcal{L}^n$, then $m^n(E)=\inf\{m(U):U\supset E,U\text{ open}\}=\sup\{m(K):K\subset E,K\text{ compact}\}$.

$\bf Thm\ 2.41$

If $f\in L^1(\mathbb{R}^n,\mathcal{L}^n,m^n)$ and $\varepsilon>0$, then

1. There is a simple function $\varphi=\sum_{j=1}^{N}a_j\chi_{R_j}$ where each $R_j$ is a product of intervals and $\int|f-\varphi|<\varepsilon$.
2. There is a continuous function $g$ with bounded support such that $\int|f-g|d\mu$.

<br/><br/>

### 2.6.1 Invariance Properties

$\bf Thm\ 2.42/2.44$

Suppose $\tau:\mathbb{R}^n\to\mathbb{R}^n$ is an affine automorphism, that is $\tau(x)=Ax+b$ where $A\in GL(n,\mathbb{R})$, $b\in\mathbb{R}^n$.

1. If $E\in\mathcal{L}$, then $\tau(E)\in\mathcal{L}$ and $m(\tau(E))=|\det A|m(E)$.
2. If $f$ is measurable, then so is $f\circ\tau$. Moreover, if $f\geq 0$ or $f\in L^1$, then

$$
\int fdm=|\det A|\int f\circ\tau(x)dm(x).
$$